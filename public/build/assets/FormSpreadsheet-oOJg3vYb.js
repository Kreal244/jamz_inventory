import{u as _,_ as n,W as E,r as d,j as e,o as S,b as k,c as h}from"./app-blqcz2ka.js";import{T as p,L as x,S as w,a as L,R as C}from"./Toast-jZpznciG.js";import{s as D}from"./showToast-G_kMG87d.js";import{e as P,f as R}from"./index.esm-gClIFQjr.js";import"./iconBase-NO4qN-QB.js";const i=[{value:"locations",type:"Locations"},{value:"inventory",type:"Inventory"},{value:"products",type:"Products"}],q=({spreadsheets:r={},handleCloseModal:o})=>{var y,N;const t=_(),u=i.filter(s=>n.keys(r).includes(s.value)),{data:l,setData:m}=E({action:"pull",type:u[0].value}),[c,I]=d.useState(n.keys(r)[0]??i[0].value),[j,v]=d.useState(((y=r[c])==null?void 0:y.sheet_id)??""),[g,b]=d.useState(""),F=s=>{s.preventDefault(),t(S()),k.get(`spreadsheet/${l.action}/${l.type}`).then(a=>{t(h()),o(),D(a.data)})},f=s=>{s.preventDefault(),o()},T=s=>{s.preventDefault(),t(S()),k.post("spreadsheet/edit",{sheet_type:c,sheet_id:j,shared_email:"shelf-hawk@sparkle-381608.iam.gserviceaccount.com"}).then(a=>{t(h()),o(),D(a.data),window.location.reload()}).catch(a=>{t(h()),b(a.response.data.message)})};return e.jsxs(p,{style:"default",className:"w-full",children:[e.jsx(p.Item,{title:"Settings",icon:P,active:!0,children:e.jsxs("form",{onSubmit:T,className:"text-sm max-md:text-xsm px-5 max-md:px-2",children:[e.jsxs("div",{className:"form-item ",children:[e.jsx(x,{value:"Select type to integrate spreadsheet"}),e.jsx(w,{onChange:s=>{var a;I(s.target.value),v(((a=r[s.target.value])==null?void 0:a.sheet_id)??"")},value:c,children:i.map(s=>e.jsx("option",{value:s.value,className:"p-2",children:s.type},s.value))})]}),e.jsx("hr",{className:"py-1 pt-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"max-md:my-2 mt-4 mb-2",children:"Step 1: Create a blank sheet."}),e.jsx("p",{className:"ml-12 mb-0 max-md:ml-3 max-md:text-[10px]",children:e.jsx("a",{href:"https://docs.google.com/spreadsheets",target:"_new",children:e.jsx("strong",{children:"Click here to go to Google Sheet"})})}),e.jsxs("p",{className:"max-md:my-2 mt-4 mb-2",children:["Step 2: Share the spreadsheet to our bot email as"," ",e.jsx("b",{children:"Editor"}),":"]}),e.jsx("p",{className:"ml-12 mb-0 max-md:ml-3 max-md:text-[10px]",children:e.jsx("strong",{children:"shelf-hawk@sparkle-381608.iam.gserviceaccount.com"})}),e.jsxs("p",{className:"max-md:my-2 mt-4 mb-2",children:[`Step 3: Rename your sheet's tab to "`,e.jsx("b",{children:(N=n.find(i,{value:c}))==null?void 0:N.type}),'".']}),e.jsxs("p",{className:"max-md:my-2 mt-4 mb-2",children:["Step 4: Copy your new ",e.jsx("b",{children:"Sheet ID"})," into the 'Sheet ID' block below."]}),e.jsx("h4",{className:"mt-4 text-primary font-bold ",children:"Information our system needs to Connect your sheet:"})]}),e.jsxs("div",{className:"form-item ",children:[e.jsx(L,{value:j,onChange:s=>v(s.target.value),onBlur:s=>{b("")}}),!n.isElement(g)&&e.jsx("p",{className:"text-danger pt-1 pl-3",children:g})]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"flex flex-row-reverse",children:[e.jsx("button",{type:"submit",className:"bg-info",children:"submit"}),e.jsx("button",{className:"bg-danger",onClick:f,children:"cancel"})]})]})}),e.jsx(p.Item,{title:"Action",icon:R,children:e.jsxs("form",{onSubmit:F,className:"gap-2 grid",children:[e.jsxs("div",{className:"form-item grid grid-cols-2",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{id:"pull",value:"pull",checked:l.action==="pull",onChange:s=>m("action",s.currentTarget.value)}),e.jsx(x,{htmlFor:"pull",children:"Pull Data"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{id:"push",value:"push",checked:l.action==="push",onChange:s=>m("action",s.currentTarget.value)}),e.jsx(x,{htmlFor:"push",children:"Push Data"})]})]}),e.jsx("div",{children:e.jsx(w,{onChange:s=>m("type",s.target.value),value:l.type,children:u.map(s=>e.jsx("option",{value:s.value,className:"p-2",children:s.type},s.value))})})]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"flex flex-row-reverse",children:[e.jsx("button",{type:"submit",className:"bg-info",children:"submit"}),e.jsx("button",{className:"bg-danger",onClick:f,children:"cancel"})]})]})})]})};export{q as default};
